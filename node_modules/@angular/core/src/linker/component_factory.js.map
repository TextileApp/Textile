{"version":3,"file":"component_factory.js","sourceRoot":"","sources":["../../../../../modules/@angular/core/src/linker/component_factory.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ChangeDetectorRef} from '../change_detection/change_detection';\nimport {Injector} from '../di/injector';\nimport {unimplemented} from '../facade/errors';\nimport {Type} from '../type';\n\nimport {ElementRef} from './element_ref';\nimport {AppView} from './view';\nimport {ViewContainer} from './view_container';\nimport {ViewRef} from './view_ref';\nimport {ViewUtils} from './view_utils';\n\n\n\n/**\n * Represents an instance of a Component created via a {@link ComponentFactory}.\n *\n * `ComponentRef` provides access to the Component Instance as well other objects related to this\n * Component Instance and allows you to destroy the Component Instance via the {@link #destroy}\n * method.\n * @stable\n */\nexport abstract class ComponentRef<C> {\n  /**\n   * Location of the Host Element of this Component Instance.\n   */\n  get location(): ElementRef { return unimplemented(); }\n\n  /**\n   * The injector on which the component instance exists.\n   */\n  get injector(): Injector { return unimplemented(); }\n\n  /**\n   * The instance of the Component.\n   */\n  get instance(): C { return unimplemented(); };\n\n  /**\n   * The {@link ViewRef} of the Host View of this Component instance.\n   */\n  get hostView(): ViewRef { return unimplemented(); };\n\n  /**\n   * The {@link ChangeDetectorRef} of the Component instance.\n   */\n  get changeDetectorRef(): ChangeDetectorRef { return unimplemented(); }\n\n  /**\n   * The component type.\n   */\n  get componentType(): Type<any> { return unimplemented(); }\n\n  /**\n   * Destroys the component instance and all of the data structures associated with it.\n   */\n  abstract destroy(): void;\n\n  /**\n   * Allows to register a callback that will be called when the component is destroyed.\n   */\n  abstract onDestroy(callback: Function): void;\n}\n\nexport class ComponentRef_<C> extends ComponentRef<C> {\n  constructor(\n      private _index: number, private _parentView: AppView<any>, private _nativeElement: any,\n      private _component: C) {\n    super();\n  }\n  get location(): ElementRef { return new ElementRef(this._nativeElement); }\n  get injector(): Injector { return this._parentView.injector(this._index); }\n  get instance(): C { return this._component; };\n  get hostView(): ViewRef { return this._parentView.ref; };\n  get changeDetectorRef(): ChangeDetectorRef { return this._parentView.ref; };\n  get componentType(): Type<any> { return <any>this._component.constructor; }\n\n  destroy(): void { this._parentView.detachAndDestroy(); }\n  onDestroy(callback: Function): void { this.hostView.onDestroy(callback); }\n}\n\n/**\n * @experimental\n */\nconst EMPTY_CONTEXT = new Object();\n\n/**\n * @stable\n */\nexport class ComponentFactory<C> {\n  constructor(\n      public selector: string, private _viewClass: Type<AppView<any>>,\n      private _componentType: Type<any>) {}\n\n  get componentType(): Type<any> { return this._componentType; }\n\n  /**\n   * Creates a new component.\n   */\n  create(\n      injector: Injector, projectableNodes: any[][] = null,\n      rootSelectorOrNode: string|any = null): ComponentRef<C> {\n    const vu: ViewUtils = injector.get(ViewUtils);\n    if (!projectableNodes) {\n      projectableNodes = [];\n    }\n    const hostView: AppView<any> = new this._viewClass(vu, null, null, null);\n    return hostView.createHostView(rootSelectorOrNode, injector, projectableNodes);\n  }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}