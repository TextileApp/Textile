{"version":3,"file":"angularfire2.js","sourceRoot":"","sources":["../src/angularfire2.ts"],"names":[],"mappings":"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","sourcesContent":["import * as firebase from 'firebase';\nimport * as utils from './utils';\nimport { FirebaseAppConfig } from './interfaces';\nimport { AuthConfiguration } from './auth';\nimport {\n  FirebaseListFactoryOpts,\n  FirebaseObjectFactoryOpts,\n} from './interfaces';\nimport {\n  FirebaseConfig,\n  FirebaseApp,\n  WindowLocation,\n  FirebaseUserConfig,\n  FirebaseAuthConfig\n} from './tokens';\nimport {\n  APP_INITIALIZER,\n  Inject,\n  Injectable,\n  OpaqueToken,\n  NgModule,\n  ModuleWithProviders\n} from '@angular/core';\nimport {\n  FirebaseSdkAuthBackend,\n  AngularFireAuth,\n  firebaseAuthConfig,\n  FirebaseAuth,\n  AuthBackend,\n  AuthMethods,\n  AuthProviders,\n  FirebaseAuthState\n} from './auth/index';\nimport {\n  FirebaseListObservable,\n  FirebaseObjectObservable,\n  FirebaseListFactory,\n  FirebaseObjectFactory,\n  AngularFireDatabase,\n  FirebaseDatabase\n} from './database/index';\n\n\nexport class AngularFire {\n  constructor(\n     private firebaseConfig:string,\n    public auth: AngularFireAuth,\n    public database: AngularFireDatabase) {}\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [FirebaseConfig, ] }, ]},\n{type: AngularFireAuth, },\n{type: AngularFireDatabase, },\n];\n}\n\nexport function _getFirebase(config: FirebaseAppConfig): firebase.app.App {\n  try {\n    return firebase.initializeApp(config);\n  }\n  catch (e) {\n    return firebase.app(null);\n  }\n}\n\nexport function _getWindowLocation(){\n  return window.location;\n}\n\nexport function _getAuthBackend(app: firebase.app.App): FirebaseSdkAuthBackend {\n  return new FirebaseSdkAuthBackend(app);\n}\n\nexport function _getDefaultFirebase(config){\n  // remove a trailing slash from the Database URL if it exists\n  config.databaseURL = utils.stripTrailingSlash(config.databaseURL);\n  return config;\n}\n\nexport const COMMON_PROVIDERS: any[] = [\n  // TODO: Deprecate\n  { provide: FirebaseAuth,\n    useExisting: AngularFireAuth\n  },\n  {\n    provide: FirebaseApp,\n    useFactory: _getFirebase,\n    deps: [FirebaseConfig]\n  },\n  AngularFireAuth,\n  AngularFire,\n  AngularFireDatabase\n];\n\nexport const FIREBASE_PROVIDERS:any[] = [\n  COMMON_PROVIDERS,\n  {\n    provide: AuthBackend,\n    useFactory: _getAuthBackend,\n    deps: [FirebaseApp]\n  },\n  {\n    provide: WindowLocation,\n    useFactory: _getWindowLocation\n  },\n];\n\n/**\n * Used to define the default Firebase root location to be\n * used throughout an application.\n */\nexport const defaultFirebase = (config: FirebaseAppConfig): any => {\n  return [\n    { provide: FirebaseUserConfig, useValue: config },\n\t{ provide: FirebaseConfig, useFactory: _getDefaultFirebase, deps: [FirebaseUserConfig] }\n  ]\n};\n\n\nexport class AngularFireModule {\n  static initializeApp(config: FirebaseAppConfig, authConfig?:AuthConfiguration): ModuleWithProviders {\n    return {\n\t\tngModule: AngularFireModule,\n\t\tproviders: [\n\t\t  { provide: FirebaseUserConfig, useValue: config },\n\t\t  { provide: FirebaseConfig, useFactory: _getDefaultFirebase, deps: [FirebaseUserConfig] },\n      { provide: FirebaseAuthConfig, useValue: authConfig }\n\t\t]\n\t}\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n\tproviders: FIREBASE_PROVIDERS\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nexport {\n  AngularFireAuth,\n  AngularFireDatabase,\n  // TODO: Deprecate\n  FirebaseAuth,\n  // TODO: Deprecate\n  FirebaseDatabase,\n  FirebaseListObservable,\n  FirebaseObjectObservable,\n  FirebaseListFactory,\n  FirebaseObjectFactory,\n  firebaseAuthConfig,\n  FirebaseAuthState,\n  AuthMethods,\n  AuthProviders,\n  WindowLocation\n}\n\nexport { FirebaseConfig, FirebaseApp, FirebaseAuthConfig, FirebaseRef, FirebaseUrl, FirebaseUserConfig } from './tokens';\nexport { FirebaseAppConfig } from './interfaces';\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}