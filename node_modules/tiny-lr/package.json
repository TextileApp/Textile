{
  "_args": [
    [
      {
        "raw": "tiny-lr@1.0.3",
        "scope": null,
        "escapedName": "tiny-lr",
        "name": "tiny-lr",
        "rawSpec": "1.0.3",
        "spec": "1.0.3",
        "type": "version"
      },
      "/Users/Matthew/Textile/node_modules/@ionic/app-scripts"
    ]
  ],
  "_from": "tiny-lr@1.0.3",
  "_id": "tiny-lr@1.0.3",
  "_inCache": true,
  "_location": "/tiny-lr",
  "_nodeVersion": "6.3.1",
  "_npmOperationalInternal": {
    "host": "packages-12-west.internal.npmjs.com",
    "tmp": "tmp/tiny-lr-1.0.3.tgz_1477978336211_0.8628808939829469"
  },
  "_npmUser": {
    "name": "elwayman02",
    "email": "hawker.jordan@gmail.com"
  },
  "_npmVersion": "3.10.3",
  "_phantomChildren": {},
  "_requested": {
    "raw": "tiny-lr@1.0.3",
    "scope": null,
    "escapedName": "tiny-lr",
    "name": "tiny-lr",
    "rawSpec": "1.0.3",
    "spec": "1.0.3",
    "type": "version"
  },
  "_requiredBy": [
    "/@ionic/app-scripts"
  ],
  "_resolved": "https://registry.npmjs.org/tiny-lr/-/tiny-lr-1.0.3.tgz",
  "_shasum": "386731170ce521263a9d337f769ee8f11e88eb04",
  "_shrinkwrap": null,
  "_spec": "tiny-lr@1.0.3",
  "_where": "/Users/Matthew/Textile/node_modules/@ionic/app-scripts",
  "author": {
    "name": "mklabs"
  },
  "bugs": {
    "url": "https://github.com/mklabs/tiny-lr/issues"
  },
  "config": {
    "test_port": "9001"
  },
  "contributors": [
    {
      "name": "Kyle Robinson Young",
      "url": "https://github.com/shama"
    },
    {
      "name": "Jordan Hawker",
      "url": "https://github.com/elwayman02"
    },
    {
      "name": "Hemanth.hm",
      "url": "https://github.com/hemanth"
    },
    {
      "name": "Mickael Daniel",
      "url": "https://github.com/mklabs"
    }
  ],
  "dependencies": {
    "body": "^5.1.0",
    "debug": "~2.2.0",
    "faye-websocket": "~0.10.0",
    "livereload-js": "^2.2.2",
    "object-assign": "^4.1.0",
    "qs": "^6.2.0"
  },
  "description": "Tiny LiveReload server, background-friendly",
  "devDependencies": {
    "babel-cli": "^6.9.0",
    "babel-plugin-add-module-exports": "^0.2.1",
    "babel-plugin-transform-regenerator": "^6.9.0",
    "babel-preset-es2015": "^6.9.0",
    "eslint": "^2.11.1",
    "eslint-config-standard": "^5.3.1",
    "eslint-plugin-promise": "^1.1.0",
    "eslint-plugin-standard": "^1.3.2",
    "express": "^4.1.1",
    "gaze": "^1.1.2",
    "mocha": "^2.3.3",
    "npm-watch": "^0.1.6",
    "standard-version": "^2.2.1",
    "supertest": "^1.2.0"
  },
  "directories": {},
  "dist": {
    "shasum": "386731170ce521263a9d337f769ee8f11e88eb04",
    "tarball": "https://registry.npmjs.org/tiny-lr/-/tiny-lr-1.0.3.tgz"
  },
  "gitHead": "bb3f575c221113108d29879ffa6b85ea48dd9119",
  "homepage": "https://github.com/mklabs/tiny-lr",
  "license": "MIT",
  "main": "./src",
  "maintainers": [
    {
      "name": "elwayman02",
      "email": "hawker.jordan@gmail.com"
    },
    {
      "name": "mklabs",
      "email": "daniel.mickael@gmail.com"
    },
    {
      "name": "shama",
      "email": "kyle@dontkry.com"
    }
  ],
  "name": "tiny-lr",
  "optionalDependencies": {},
  "readme": "# tiny-lr [![Build Status](https://travis-ci.org/mklabs/tiny-lr.svg?branch=master)](https://travis-ci.org/mklabs/tiny-lr)\n\nThis script manages a tiny [LiveReload](http://livereload.com/) server\nimplementation.\n\n[![NPM](https://nodei.co/npm/tiny-lr.png?downloads=true&stars=true)](https://nodei.co/npm/tiny-lr/)\n\nIt exposes an HTTP server and express middleware, with a very basic REST\nAPI to notify the server of a particular change.\n\nIt doesn't have any watch ability, this must be done at the build process or\napplication level.\n\nInstead, it exposes a very simple API to notify the server that some\nchanges have been made, then broadcasted to every connected livereload client.\n\n    # notify of a single change\n    curl http://localhost:35729/changed?files=style.css\n\n    # notify using a longer path\n    curl http://localhost:35729/changed?files=js/app.js\n\n    # notify of multiple changes, comma or space delimited\n    curl http://localhost:35729/changed?files=index.html,style.css,docs/docco.css\n\nOr you can bulk the information into a POST request, with the body as a JSON array of files.\n\n    curl -X POST http://localhost:35729/changed -d '{ \"files\": [\"style.css\", \"app.js\"] }'\n\n    # from a JSON file\n    node -pe 'JSON.stringify({ files: [\"some.css\", \"files.css\"] })' > files.json\n    curl -X POST -d @files.json http://localhost:35729\n\nAs for the livereload client, you need to install the browser extension:\nhttp://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions-\n(**note**: you need to listen on port 35729 to be able to use it with your\nbrowser extension)\n\nor add the livereload script tag manually:\nhttp://feedback.livereload.com/knowledgebase/articles/86180-how-do-i-add-the-script-tag-manually-\n(and here you can choose whichever port you want)\n\n## Integration\n\nThe best way to integrate the runner into your workflow is to add it as a `reload`\nstep within your build tool.\n\n```js\nvar tinylr = require('tiny-lr');\n\n// standard LiveReload port\nvar port = 35729;\n\n// tinylr(opts) => new tinylr.Server(opts);\ntinylr().listen(port, function() {\n  console.log('... Listening on %s ...', port);\n})\n```\n\nYou can define your own route and listen for a specific request:\n\n```js\nvar server = tinylr();\n\nserver.on('GET /myplace', function(req, res) {\n  res.write('Mine');\n  res.end();\n})\n```\n\nAnd stop the server manually:\n\n```js\nserver.close();\n```\n\nThis will close any websocket connection established and emit a close event.\n\n### Middleware\n\nTo use as a connect / express middleware, tiny-lr needs query /\nbodyParser middlewares prior in the stack (to handle POST requests)\n\nAny handled requests ends at the tinylr level, not found and errors are\nnexted to the rest of the stack.\n\n```js\nvar port = process.env.LR_PORT || process.env.PORT || 35729;\n\nvar path    = require('path');\nvar express = require('express');\nvar tinylr  = require('tiny-lr');\nvar body    = require('body-parser');\n\nvar app = express();\n\n// This binds both express app and tinylr on the same port\n\napp\n  .use(body())\n  .use(tinylr.middleware({ app: app }))\n  .use(express.static(path.resolve('./')))\n  .listen(port, function() {\n    console.log('listening on %d', port);\n  });\n```\n\nThe port you listen on is important, and tinylr should **always** listen on\nthe LiveReload standard one: `35729`. Otherwise, you won't be able to rely\non the browser extensions, though you can still use the manual snippet\napproach.\n\nYou can also start two different servers, one on your app port, the\nother listening on the LiveReload port.\n\n### Using grunt\n\nHead over to [https://github.com/gruntjs/grunt-contrib-watch](https://github.com/gruntjs/grunt-contrib-watch#live-reloading)\n\n### Using make\n\nSee the [make-livereload](https://github.com/mklabs/make-livereload) repo.\nThis repository defines a bin wrapper you can use and install with:\n\n    npm install make-livereload -g\n\nIt bundles the same bin wrapper previously used in the tiny-lr repo.\n\n    Usage: tiny-lr [options]\n\n    Options:\n\n      -h, --help     output usage information\n      -V, --version  output the version number\n      port           -p\n      pid            Path to the generated PID file (default: ./tiny-lr.pid)\n\n### Using gulp\n\nSee the [gulp-livereload](https://github.com/vohof/gulp-livereload) repo.\n\n## Options\n\n- `livereload`    - Path to the client side lib (defaults to `path.join(__dirname, '../node_modules/livereload-js/dist/livereload.js')`)\n- `port`          - Livereload port (defaults to `35729`)\n- `errorListener` - A callback to invoke when an error occurs (otherwise, fallbacks to standard error output)\n- `handler`       - A function to use as the main request handler (`function(req,\n  res)`). When not defined, the default handler takes place.\n- `app`           - An express or other middleware based HTTP server\n- `key`           - Option to pass in to create an https server\n- `cert`          - Option to pass in to create an https server\n- `pfx`           - Can also be used to create an https server instead of `key` & `cert`\n- `liveCSS`       - LiveReload option to enable live CSS reloading (defaults to true)\n- `liveImg`       - LiveReload option to enable live images reloading (defaults to true)\n- `dashboard`     - A boolean to prevent tiny-lr from configuring a default\n  \"home\" route. Only used with the CLI (default: false)\n\n## Tests\n\n    npm test\n\n---\n\n\n# TOC\n\n- [GET /](#tiny-lr-get-)\n- [GET /changed](#tiny-lr-get-changed)\n- [POST /changed](#tiny-lr-post-changed)\n- [GET /livereload.js](#tiny-lr-get-livereloadjs)\n- [GET /kill](#tiny-lr-get-kill)\n\n\n```js\nvar url = parse(this.request.url);\nvar server = this.app;\n\nvar ws = this.ws = new WebSocket('ws://' + url.host + '/livereload');\n\nws.onopen = function(event) {\n  var hello = {\n    command: 'hello',\n    protocols: ['http://livereload.com/protocols/official-7']\n  };\n\n  ws.send(JSON.stringify(hello));\n};\n\nws.onmessage = function(event) {\n  assert.deepEqual(event.data, JSON.stringify({\n    command: 'hello',\n    protocols: ['http://livereload.com/protocols/official-7'],\n    serverName: 'tiny-lr'\n  }));\n\n  assert.ok(Object.keys(server.clients).length);\n  done();\n};\n```\n\nproperly cleans up established connection on exit.\n\n```js\nvar ws = this.ws;\n\nws.onclose = done.bind(null, null);\n\nrequest(this.server)\n  .get('/kill')\n  .expect(200, function() {\n    console.log('server shutdown');\n  });\n```\n\n<a name=\"tiny-lr\" />\n# tiny-lr\n<a name=\"tiny-lr-get-\" />\n## GET /\nrespond with nothing, but respond.\n\n```js\nrequest(this.server)\n  .get('/')\n  .expect('Content-Type', /json/)\n  .expect('{\"tinylr\":\"Welcome\",\"version\":\"0.0.1\"}')\n  .expect(200, done);\n```\n\nunknown route respond with proper 404 and error message.\n\n```js\nrequest(this.server)\n  .get('/whatev')\n  .expect('Content-Type', /json/)\n  .expect('{\"error\":\"not_found\",\"reason\":\"no such route\"}')\n  .expect(404, done);\n```\n\n<a name=\"tiny-lr-get-changed\" />\n## GET /changed\nwith no clients, no files.\n\n```js\nrequest(this.server)\n  .get('/changed')\n  .expect('Content-Type', /json/)\n  .expect(/\"clients\":\\[\\]/)\n  .expect(/\"files\":\\[\\]/)\n  .expect(200, done);\n```\n\nwith no clients, some files.\n\n```js\nrequest(this.server)\n  .get('/changed?files=gonna.css,test.css,it.css')\n  .expect('Content-Type', /json/)\n  .expect('{\"clients\":[],\"files\":[\"gonna.css\",\"test.css\",\"it.css\"]}')\n  .expect(200, done);\n```\n\n<a name=\"tiny-lr-post-changed\" />\n## POST /changed\nwith no clients, no files.\n\n```js\nrequest(this.server)\n  .post('/changed')\n  .expect('Content-Type', /json/)\n  .expect(/\"clients\":\\[\\]/)\n  .expect(/\"files\":\\[\\]/)\n  .expect(200, done);\n```\n\nwith no clients, some files.\n\n```js\nvar data = { clients: [], files: ['cat.css', 'sed.css', 'ack.js'] };\n\nrequest(this.server)\n  .post('/changed')\n  .send({ files: data.files })\n  .expect('Content-Type', /json/)\n  .expect(JSON.stringify(data))\n  .expect(200, done);\n```\n\n<a name=\"tiny-lr-get-livereloadjs\" />\n## GET /livereload.js\nrespond with livereload script.\n\n```js\nrequest(this.server)\n  .get('/livereload.js')\n  .expect(/LiveReload/)\n  .expect(200, done);\n```\n\n<a name=\"tiny-lr-get-kill\" />\n## GET /kill\nshutdown the server.\n\n```js\nvar server = this.server;\nrequest(server)\n  .get('/kill')\n  .expect(200, function(err) {\n    if(err) return done(err);\n    assert.ok(!server._handle);\n    done();\n  });\n```\n\n## Thanks!\n\n- Tiny-lr is a [LiveReload](http://livereload.com/) implementation. They\n  really made frontend editing better for a lot of us. They have a\n  [LiveReload App on the Mac App Store](https://itunes.apple.com/us/app/livereload/id482898991)\n  you might want to check out.\n\n- To all [contributors](https://github.com/mklabs/tiny-lr/graphs/contributors)\n\n- [@FGRibreau](https://github.com/FGRibreau) / [pid.js\n  gist](https://gist.github.com/1846952)) for the background friendly\nbin wrapper, used in [make-livereload](https://github.com/mklabs/make-livereload)\n",
  "readmeFilename": "readme.md",
  "repository": {
    "type": "git",
    "url": "git://github.com/mklabs/tiny-lr.git"
  },
  "scripts": {
    "babel": "babel lib/ -d src && babel test/ -d src_test/",
    "eslint": "eslint . --debug",
    "get-change": "curl http://localhost:35729/changed?files=site.css",
    "mocha": "npm run babel && mocha --reporter spec src_test/",
    "post-change": "sh scripts/post-change",
    "prepublish:": "npm run babel",
    "test": "npm run eslint && npm run mocha",
    "test-debug": "DEBUG=tinylr:* mocha --reporter list",
    "test-debug-all": "DEBUG=* mocha --reporter list",
    "watch": "npm-watch"
  },
  "version": "1.0.3",
  "watch": {
    "babel": "{lib,test}/**/*.js"
  }
}
